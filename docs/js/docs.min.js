!function(){"use strict";const e={topics:Object.create(null),emit(e,t){(this.topics[e]||[]).forEach((e=>{e(t)}))},on(e,t){const r=this.topics;r[e]||(r[e]=[]),r[e].push(t)},off(e,t){const r=this.topics,n=(r[e]||[]).findIndex((e=>e===t));n>-1&&r[e].splice(n,1)}},t=document.querySelector("#main"),r=t.scrollHeight;let n=null,o=!1;const i=(r,i=100)=>{let s=t.scrollTop;const c=r-s,l=Math.ceil(c/15),u=()=>{if(n&&clearTimeout(n),s+=l,(s<=r&&c<0||s>=r&&c>0)&&(s=r,o=!1),t.scrollTop=s,!o)return clearTimeout(n),n=null,e.emit("buttons:toggle",s),!1;n=setTimeout(u,i)};if(o)return clearTimeout(n),n=null,o=!1,!1;o=!0,u()},s=e=>{i(0,e)},c=e=>{i(r,e)},l=e=>{const t=document.querySelector(`#${e}`);i(t.offsetTop)};var u=()=>{(()=>{const r=new IntersectionObserver((t=>{t.forEach((t=>{t.intersectionRatio>0&&e.emit("sync:anchor",t.target.getAttribute("id"))}))}),{root:t});t.querySelectorAll(".section__h3").forEach((e=>{r.observe(e)}))})(),e.on("scroll:to:top",s),e.on("scroll:to:bottom",c),e.on("scroll:to:method",l)};const a=(e,t=null,r=!0,n=!0)=>new CustomEvent(e,{detail:t,bubbles:r,cancelable:n}),d=e=>"string"==typeof e,h=e=>!!(e&&e.nodeName&&e.tagName&&1===e.nodeType),m=(e,t)=>{let r=e._listeners||[];return d(t)&&t&&(r=r.filter((e=>e.type===t))),r},g=["focusout","blur","focusin","focus","load","unload","mouseenter","mouseleave"],p=(e,t,r)=>{const n=g.indexOf(t)>-1;r._delegateListener&&delete(r=r._delegateListener)._delegateListener,function(e,t,r){const n=e._listeners;let o=-1;if(n.length<1)return!1;n.forEach(((e,n)=>{const i=e.fn;t===e.type&&(o=n,i===r&&(o=n))})),o>-1&&n.splice(o,1)}(e,t,r),e.removeEventListener(t,r,n)},f=function(e,t,r=!1){const n=d(e)?document.querySelector(e):e,o=n.childNodes;m(n,t).forEach((e=>{p(n,e.type,e.fn)})),(r||!0===t||1===arguments.length)&&n&&o&&o.forEach((e=>{h(e)&&f(e,t,r)}))},v=e=>"function"==typeof e||"[object Function]"===(e=>Object.prototype.toString.apply(e))(e),$=(e,t,r)=>{if(!v(r))return f(e,t);p(e,t,r)},_=(e,t="")=>{const r=t.replace(/^>/i,"");return!!(t&&r&&e)&&(e.matches?e.matches(r):!!e.msMatchesSelector&&e.msMatchesSelector(r))},y=e=>e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode,T=function(e){return e&&3===e.nodeType?e.parentNode:e},S=function(e){const t=e.target;return T(t)},k=(e,t,r,n,o,i,s=!1)=>{const c=g.indexOf(r)>-1,l=function(c){const u=((e,t,r,n)=>{const o=r||document;if(!e)return null;do{if(null!=t&&(">"===t[0]?e.parentNode===o&&_(e,t):_(e,t))||n&&e===o)return e;if(e===o)break}while(e=y(e))})(S(c),t,e);let a=i||e;c.delegateTarget=u,!0===i&&(a=o),u&&(!0===s&&$(e,r,l),n.call(a,c,o))};e._listeners||(e._listeners=[]),e._listeners.push({el:e,selector:t,type:r,fn:l,data:o,context:i,capture:c}),n._delegateListener=l,e.addEventListener(r,l,c)},L=()=>{const e=navigator.userAgent;return!!e.match(/Trident/g)||!!e.match(/MSIE/g)},E=e=>{const t=m(e),r=[];return t.forEach((e=>{r.push(e.type)})),[...new Set(r)]},b=function(){const e=document.documentElement||document.body;let t=[0,0];return e&&(e.scrollTop||e.scrollLeft)&&(t=[e.scrollTop,e.scrollLeft]),t},x=function(e){let t=e.pageX;return t||0===t||(t=e.clientX||0,L()&&(t+=b()[1])),t},I=function(e){let t=e.pageY;return t||0===t||(t=e.clientY||0,L()&&(t+=b()[0])),t},q=function(e){let t=e.keyCode||e.charCode;const r={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};return(()=>{const e=navigator.userAgent;return!/Chrome|Android|CriOS|FxiOS|EdgiOS/i.test(e)&&/Mac|iPhone|iPod|iPad/i.test(e)&&/Safari/i.test(e)})()&&t in r&&(t=r[t]),t},P=function(e){e.preventDefault()},w=function(e){e.stopPropagation()},C=function(e){w(e),P(e)};class M{constructor(e){return h(e)?this.$el=e:d(e)&&(this.$el=document.querySelector(e)),this}getListeners(e){return m(this.$el,e)}getTypes(){return E(this.$el)}hasEvent(e){return((e,t)=>{const r=E(e);let n;return!(r.length<1)&&(n=r.length>0,t&&d(t)&&(n=r.indexOf(t)>-1),n)})(this.$el,e)}getPageX(e){return x(e)}getPageY(e){return I(e)}getPageXY(e){return function(e){return[x(e),I(e)]}(e)}getCharCode(e){return q(e)}getRelatedTarget(e){return function(e){let t=e.relatedTarget;const r=e.type;return t||("mouseout"===r?t=e.toElement:"mouseover"===r&&(t=e.fromElement)),T(t)}(e)}getTarget(e){return S(e)}purge(e,t=!1){return f(this.$el,e,t),this}destroy(){var e;return e=this.$el,E(e).forEach((t=>{f(e,t,!0)})),this}createEvent(e,t=null,r=!0,n=!0){return a(e,t,r,n)}off(e,t){return $(this.$el,e,t),this}on(e,t,r,n,o,i=!1){return k(this.$el,e,t,r,n,o||this,i),this}once(e,t,r,n,o){return((e,t,r,n,o,i)=>{k(e,t,r,n,o,i,!0)})(this.$el,e,t,r,n,o),this}click(e,t,r,n,o=!1){return k(this.$el,e,"click",t,r,n,o),this}dbclick(e,t,r,n,o=!1){return k(this.$el,e,"dbclick",t,r,n,o),this}mouseenter(e,t,r,n,o=!1){return k(this.$el,e,"mouseenter",t,r,n,o),this}mouseleave(e,t,r,n,o=!1){return k(this.$el,e,"mouseleave",t,r,n,o),this}mousedown(e,t,r,n,o=!1){return k(this.$el,e,"mousedown",t,r,n,o),this}mouseup(e,t,r,n,o=!1){return k(this.$el,e,"mouseup",t,r,n,o),this}mouseover(e,t,r,n,o=!1){return k(this.$el,e,"mouseover",t,r,n,o),this}mousemove(e,t,r,n,o=!1){return k(this.$el,e,"mousemove",t,r,n,o),this}mouseout(e,t,r,n,o=!1){return k(this.$el,e,"mouseout",t,r,n,o),this}drag(e,t,r,n,o=!1){return k(this.$el,e,"drag",t,r,n,o),this}dragend(e,t,r,n,o=!1){return k(this.$el,e,"dragend",t,r,n,o),this}dragenter(e,t,r,n,o=!1){return k(this.$el,e,"dragenter",t,r,n,o),this}dragleave(e,t,r,n,o=!1){return k(this.$el,e,"dragleave",t,r,n,o),this}dragover(e,t,r,n,o=!1){return k(this.$el,e,"dragover",t,r,n,o),this}dragstart(e,t,r,n,o=!1){return k(this.$el,e,"dragstart",t,r,n,o),this}drop(e,t,r,n,o=!1){return k(this.$el,e,"drop",t,r,n,o),this}wheel(e,t,r,n,o=!1){return k(this.$el,e,"wheel",t,r,n,o),this}contextmenu(e,t,r,n,o=!1){return k(this.$el,e,"contextmenu",t,r,n,o),this}focusin(e,t,r,n,o=!1){return function(e,t,r,n,o,i=!1){const s=L()?"focusin":"focus";k(e,t,s,r,n,o,i)}(this.$el,e,t,r,n,o),this}focusout(e,t,r,n,o=!1){return function(e,t,r,n,o,i=!1){const s=L()?"focusout":"blur";k(e,t,s,r,n,o,i)}(this.$el,e,t,r,n,o),this}change(e,t,r,n,o=!1){return k(this.$el,e,"change",t,r,n,o),this}input(e,t,r,n,o=!1){return k(this.$el,e,"input",t,r,n,o),this}compositionstart(e,t,r,n,o=!1){return k(this.$el,e,"compositionstart",t,r,n,o),this}compositionupdate(e,t,r,n,o=!1){return k(this.$el,e,"compositionupdate",t,r,n,o),this}compositionend(e,t,r,n,o=!1){return k(this.$el,e,"compositionend",t,r,n,o),this}paste(e,t,r,n,o=!1){return k(this.$el,e,"paste",t,r,n,o),this}copy(e,t,r,n,o=!1){return k(this.$el,e,"copy",t,r,n,o),this}cut(e,t,r,n,o=!1){return k(this.$el,e,"cut",t,r,n,o),this}keydown(e,t,r,n,o=!1){return k(this.$el,e,"keydown",t,r,n,o),this}keyup(e,t,r,n,o=!1){return k(this.$el,e,"keyup",t,r,n,o),this}error(e,t,r,n,o=!1){return k(this.$el,e,"error",t,r,n,o),this}trigger(e,t){return((e,t,r)=>{let n;!(!t||!r)&&(n=e.querySelector(r),!!n&&n.dispatchEvent(a(t)))})(this.$el,e,t),this}preventDefault(e){return P(e),this}stopPropagation(e){return w(e),this}stopEvent(e){return C(e),this}stopImmediate(e){return function(e){C(e),e.stopImmediatePropagation()}(e),this}}const O=e=>new M(e),H=document.querySelector("#aside");let N=null;const X=function(t){const r=t.delegateTarget.href.split("#")[1];e.emit("scroll:to:method",r),t.stopPropagation(),t.preventDefault()},Y=e=>{const t=document.querySelector(`.aside__anchor[href="#${e}"]`).parentNode;N&&N.classList.remove("active"),t.classList.add("active"),N=t};var A=()=>{const t=O(H);e.on("sync:anchor",Y),t.click(".aside__anchor",X)};const j=document.querySelector("#buttons"),R=e=>{const t=document.querySelector("#main").scrollHeight,r=j.querySelector(".up"),n=j.querySelector(".down");e<=0?(r.classList.add("hide"),n.classList.remove("hide")):e>=t?(n.classList.add("hide"),r.classList.remove("hide")):e>0&&e<t&&(r.classList.remove("hide"),n.classList.remove("hide"))};var D=()=>{const t=O(j);R(0),e.on("buttons:toggle",R),t.click(".up",(()=>{e.emit("scroll:to:top",50)})),t.click(".down",(()=>{e.emit("scroll:to:bottom",50)}))};let F=[{id:1,text:"Item-1"},{id:2,text:"Item-2"},{id:3,text:"Item-3"},{id:4,text:"Item-4"},{id:5,text:"Item-5"},{id:6,text:"Item-6"},{id:7,text:"Item-7"},{id:8,text:"Item-8"},{id:9,text:"Item-9"},{id:10,text:"Item-10"}],U=!0,z=!0;const B=document.querySelector("#action-remove"),G=document.querySelector("#action-item"),J=document.querySelector("#append"),K=document.querySelector("#list"),Q=O(K),V=document.querySelector("#console"),W=document.querySelector("#log"),Z=O(V),ee=()=>{let e=[];F.forEach((t=>{const r=t.id,n=encodeURIComponent(t.text),o=`<li id="${"item-"+r}" class="case__item"><span class="case__label">${n}</span><a href="#list?id=${r}&amp;name=${n}" class="case__remove" data-id="${r}">删除</a></li>`;e.push(o)})),K.innerHTML=e.join("")},te=function(){const e=F.length,t=e>0?F[e-1].id+1:1,r={id:t,text:`Item-${t}`};F.push(r),ee(),W.value+=`新添加的 li 节点的 id 为：'item-${t}'\r`,de()},re=function(e){const t=e.delegateTarget,r=parseInt(t.getAttribute("data-id"),10);F=F.filter((e=>r!==e.id)),ee(),W.value+=`click 事件触发，事件的 delegateTarget 为：'${t}'\r`,W.value+=`删除的 li 节点 id 为：'item-${r}'\r`,Q.stopImmediate(e),de()},ne=function(e){const t=Q.getRelatedTarget(e);if(!t)return!1;W.value+=`mouseenter 事件触发，事件的 relatedTarget 为：'${t}'\r`,de()},oe=function(e){const t=Q.getPageX(e),r=Q.getPageY(e),n=e.delegateTarget;if(!n)return!1;W.value+=`click 事件触发，当前点击的 li 节点的 id 为：'${n.id}'\r`,W.value+=`getPageX() 获取点击处的 pageX 为：'${t}'\r`,W.value+=`getPageY() 获取点点击处的 pageY 为：'${r}'\r`,de()},ie=function(e){const t=e.delegateTarget,r=e.type;if(!t)return!1;W.value+=`$emitter.trigger('log', '.case__item:nth-child(2)') 触发自定义 ${r} 事件\r`,W.value+=`事件的 delegateTarget 为节点的 id 为：'${t.id}'\r`,de()},se=()=>{U=!U,U?(W.value+="已恢复 .case__remove 事件代理绑定\r",B.innerHTML="解除 .case__remove 绑定",Q.click(".case__remove",re)):(W.value+="已解除 .case__remove 事件代理绑定\r",B.innerHTML="恢复 .case__remove 绑定",Q.off("click",re)),de()},ce=()=>{z=!z,z?(W.value+="已恢复 .case__item 事件代理绑定\r",G.innerHTML="解除 .case__item 绑定",Q.mouseenter(".case__item",ne),Q.on(".case__item","click",oe)):(W.value+="已解除 .case__item 事件代理绑定\r",G.innerHTML="恢复 .case__item 绑定",Q.purge("mouseenter"),Q.off("click",oe)),de()},le=function(e){const t=e.type,r=e.target;if(!r)return!1;W.value+=`${r} 触发 ${t} 事件\r`,de()},ue=function(e){const t=e.type,r=e.target,n=Z.getCharCode(e);if(!r)return!1;W.value+=`\r${r} 触发 ${t} 事件\r`,W.value+=`事件的 charCode 是：${n}\r`,de()},ae=function(e){const t=e.type,r=e.target;if(!r)return!1;Q.stopImmediate(e),W.value+=`$emitter.trigger('alert', '.case__item:last-child') 触发自定义 ${t} 事件\r`,W.value+=`事件的 delegateTarget 为节点的 id 为：'${r.id}'\r`,de()},de=()=>{W.scrollTop=W.scrollHeight};var he=()=>{let e=[];ee(),K.addEventListener("click",oe),G.addEventListener("click",ce),B.addEventListener("click",se),Q.mouseenter(".case__item",ne),Q.click(".case__remove",re),Q.on(".case__item","click",oe),Q.on(".case__item","log",ie),Q.on(".case__item","alert",ae),Q.on(".case__item","alert",le),J.addEventListener("click",te),e=Q.getTypes(),W.value+=`getTypes() 获取 $emitter 绑定事件：'${e}'\r`,Q.trigger("log",".case__item:nth-child(2)"),Q.trigger("alert",".case__item:last-child"),Z.focusin(".case__textarea",le),Z.keyup(".case__textarea",ue),e=Z.getTypes(),W.value+=`getTypes() 获取 $provider 绑定事件：'${e}'\r`};u(),A(),D(),he()}();
//# sourceMappingURL=docs.min.js.map
