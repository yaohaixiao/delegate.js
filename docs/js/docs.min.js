!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.delegate=t()}(this,function(){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e(e,t){for(var n,r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return String(e);if("object"!==o(n=n.call(e,t)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(i.key,"string"),"symbol"===o(n)?n:String(n)),i)}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return"string"==typeof e}function l(e){return e&&e.nodeName&&e.tagName&&1===e.nodeType}function a(){var e=navigator.userAgent;return e.match(/Trident/g)||e.match(/MSIE/g)}function i(e){return e&&3===e.nodeType?e.parentNode:e}function d(e){return i(e=e.target)}function c(e,t){return e=e._listeners||[],u(t)&&t?e.filter(function(e){return e.type===t}):e}function s(e){var t,e=c(e),n=[];return e.forEach(function(e){n.push(e.type)}),function(e){if(Array.isArray(e))return r(e)}(t=new Set(n))||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){var t=e.pageX;return t||0===t||(t=e.clientX||0,a()&&(t+=k()[1])),t}function n(e){var t=e.pageY;return t||0===t||(t=e.clientY||0,a()&&(t+=k()[0])),t}function v(e){var e=e.keyCode||e.charCode,t={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},n=navigator.userAgent;return!/Chrome|Android|CriOS|FxiOS|EdgiOS/i.test(n)&&/Mac|iPhone|iPod|iPad/i.test(n)&&/Safari/i.test(n)&&e in t?t[e]:e}function h(e,t,n,r){return new CustomEvent(e,{detail:1<arguments.length&&void 0!==t?t:null,bubbles:!(2<arguments.length&&void 0!==n)||n,cancelable:!(3<arguments.length&&void 0!==r)||r})}function f(e,t,n){var r=-1<_.indexOf(t);if(!b(n))return T(e,t);n._delegateListener&&delete(n=n._delegateListener)._delegateListener,S(e,t,n),e.removeEventListener(t,n,r)}function g(i,r,o,u,l,a,e){function c(e){var t=function(e,t){var n,r=i||document;if(!e)return null;do{if(null!=t&&(">"!==t[0]||e.parentNode===r)&&function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=t.replace(/^>/i,"");return!!(t&&n&&e)&&(e.matches?e.matches(n):!!e.msMatchesSelector&&e.msMatchesSelector(n))}(e,t))return e}while(e!==r&&(e=(n=e).host&&n!==document&&n.host.nodeType?n.host:n.parentNode))}(d(e),r),n=a||i;e.delegateTarget=t,!0===a&&(n=l),t&&(!0===s&&f(i,o,c),u.call(n,e,l))}var s=6<arguments.length&&void 0!==e&&e,e=-1<_.indexOf(o);i._listeners||(i._listeners=[]),i._listeners.push({el:i,selector:r,type:o,fn:c,data:l,context:a,capture:e}),u._delegateListener=c,i.addEventListener(o,c,e)}function m(e){e.preventDefault()}function y(e){e.stopPropagation()}function p(e){y(e),m(e)}function k(){var e=document.documentElement||document.body;return e&&(e.scrollTop||e.scrollLeft)?[e.scrollTop,e.scrollLeft]:[0,0]}var $,_=["focusout","blur","focusin","focus","load","unload","mouseenter","mouseleave"],b=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.apply(e)},T=function t(e,n){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=u(e)?document.querySelector(e):e,e=i.childNodes;c(i,n).forEach(function(e){f(i,e.type,e.fn)}),(r||!0===n||1===arguments.length)&&i&&e&&e.forEach(function(e){l(e)&&t(e,n,r)})},S=function(e,n,r){var e=e._listeners,i=-1;if(e.length<1)return!1;e.forEach(function(e,t){n===e.type&&(i=t,r===e.fn)&&(i=t)}),-1<i&&e.splice(i,1)},E=(e(($=L).prototype,[{key:"getListeners",value:function(e){return c(this.$el,e)}},{key:"getTypes",value:function(){return s(this.$el)}},{key:"hasEvent",value:function(e){return!((t=s(t=this.$el)).length<1)&&(n=0<t.length,e&&u(e)?-1<t.indexOf(e):n);var t,n}},{key:"getPageX",value:t},{key:"getPageY",value:n},{key:"getPageXY",value:function(e){return[t(e),n(e)]}},{key:"getCharCode",value:v},{key:"getRelatedTarget",value:function(e){return t=e.relatedTarget,n=e.type,t||("mouseout"===n?t=e.toElement:"mouseover"===n&&(t=e.fromElement)),i(t);var t,n}},{key:"getTarget",value:d},{key:"purge",value:function(e){return T(this.$el,e,1<arguments.length&&void 0!==arguments[1]&&arguments[1]),this}},{key:"destroy",value:function(){var t=this.$el;return s(t).forEach(function(e){T(t,e,!0)}),this}},{key:"createEvent",value:function(e){return h(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,!(2<arguments.length&&void 0!==arguments[2])||arguments[2],!(3<arguments.length&&void 0!==arguments[3])||arguments[3])}},{key:"off",value:function(e,t){return f(this.$el,e,t),this}},{key:"on",value:function(e,t,n,r,i){return g(this.$el,e,t,n,r,i||this,5<arguments.length&&void 0!==arguments[5]&&arguments[5]),this}},{key:"once",value:function(e,t,n,r,i){return g(this.$el,e,t,n,r,i,!0),this}},{key:"click",value:function(e,t,n,r){return g(this.$el,e,"click",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"dbclick",value:function(e,t,n,r){return g(this.$el,e,"dbclick",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"mouseenter",value:function(e,t,n,r){return g(this.$el,e,"mouseenter",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"mouseleave",value:function(e,t,n,r){return g(this.$el,e,"mouseleave",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"mousedown",value:function(e,t,n,r){return g(this.$el,e,"mousedown",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"mouseup",value:function(e,t,n,r){return g(this.$el,e,"mouseup",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"mouseover",value:function(e,t,n,r){return g(this.$el,e,"mouseover",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"mousemove",value:function(e,t,n,r){return g(this.$el,e,"mousemove",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"mouseout",value:function(e,t,n,r){return g(this.$el,e,"mouseout",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"drag",value:function(e,t,n,r){return g(this.$el,e,"drag",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"dragend",value:function(e,t,n,r){return g(this.$el,e,"dragend",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"dragenter",value:function(e,t,n,r){return g(this.$el,e,"dragenter",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"dragleave",value:function(e,t,n,r){return g(this.$el,e,"dragleave",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"dragover",value:function(e,t,n,r){return g(this.$el,e,"dragover",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"dragstart",value:function(e,t,n,r){return g(this.$el,e,"dragstart",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"drop",value:function(e,t,n,r){return g(this.$el,e,"drop",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"wheel",value:function(e,t,n,r){return g(this.$el,e,"wheel",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"contextmenu",value:function(e,t,n,r){return g(this.$el,e,"contextmenu",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"focusin",value:function(e,t,n,r){return function(e,t,n,r,i,o){o=5<arguments.length&&void 0!==o&&o;g(e,t,a()?"focusin":"focus",n,r,i,o)}(this.$el,e,t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"focusout",value:function(e,t,n,r){return function(e,t,n,r,i,o){o=5<arguments.length&&void 0!==o&&o;g(e,t,a()?"focusout":"blur",n,r,i,o)}(this.$el,e,t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"change",value:function(e,t,n,r){return g(this.$el,e,"change",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"input",value:function(e,t,n,r){return g(this.$el,e,"input",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"compositionstart",value:function(e,t,n,r){return g(this.$el,e,"compositionstart",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"compositionupdate",value:function(e,t,n,r){return g(this.$el,e,"compositionupdate",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"compositionend",value:function(e,t,n,r){return g(this.$el,e,"compositionend",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"paste",value:function(e,t,n,r){return g(this.$el,e,"paste",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"copy",value:function(e,t,n,r){return g(this.$el,e,"copy",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"cut",value:function(e,t,n,r){return g(this.$el,e,"cut",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"keydown",value:function(e,t,n,r){return g(this.$el,e,"keydown",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"keyup",value:function(e,t,n,r){return g(this.$el,e,"keyup",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"error",value:function(e,t,n,r){return g(this.$el,e,"error",t,n,r,4<arguments.length&&void 0!==arguments[4]&&arguments[4]),this}},{key:"trigger",value:function(e,t){var n=this.$el;return e&&t&&(n=n.querySelector(t))&&n.dispatchEvent(h(e)),this}},{key:"preventDefault",value:function(e){return m(e),this}},{key:"stopPropagation",value:function(e){return y(e),this}},{key:"stopEvent",value:function(e){return p(e),this}},{key:"stopImmediate",value:function(e){return p(e),e.stopImmediatePropagation(),this}}]),Object.defineProperty($,"prototype",{writable:!1}),L);function L(e){if(this instanceof L)return l(e)?this.$el=e:u(e)&&(this.$el=document.querySelector(e)),this;throw new TypeError("Cannot call a class as a function")}return function(e){return new E(e)}}),function(){let r=[{id:1,text:"Item-1"},{id:2,text:"Item-2"},{id:3,text:"Item-3"},{id:4,text:"Item-4"},{id:5,text:"Item-5"},{id:6,text:"Item-6"},{id:7,text:"Item-7"},{id:8,text:"Item-8"},{id:9,text:"Item-9"},{id:10,text:"Item-10"}],e=!0,t=!0;const n=document.querySelector("#action-remove"),i=document.querySelector("#action-item"),o=document.querySelector("#append"),u=document.querySelector("#list"),l=delegate(u);var a=document.querySelector("#console");function c(){var e=r.length,t={id:e=0<e?r[e-1].id+1:1,text:"Item-"+e};r.push(t),m(),f.value+=`新添加的 li 节点的 id 为：'item-${e}'\r`,b()}function s(e){var t=e.delegateTarget,e=e.type;if(!t)return!1;f.value+=`$emitter.trigger('log', '.case__item:nth-child(2)') 触发自定义 ${e} 事件\r`,f.value+=`事件的 delegateTarget 为节点的 id 为：'${t.id}'\r`,b()}function d(e){var t=e.type;if(!(e=e.target))return!1;f.value+=e+` 触发 ${t} 事件\r`,b()}function v(e){var t=e.type,n=e.target,e=g.getCharCode(e);if(!n)return!1;f.value+=`\r${n} 触发 ${t} 事件\r`,f.value+=`事件的 charCode 是：${e}\r`,b()}function h(e){var t=e.type,n=e.target;if(!n)return!1;l.stopImmediate(e),f.value+=`$emitter.trigger('alert', '.case__item:last-child') 触发自定义 ${t} 事件\r`,f.value+=`事件的 delegateTarget 为节点的 id 为：'${n.id}'\r`,b()}const f=document.querySelector("#log"),g=delegate(a),m=()=>{let n=[];r.forEach(e=>{var t=e.id,e=encodeURIComponent(e.text),e=`<li id="${"item-"+t}" class="case__item">`+`<span class="case__label">${e}</span>`+`<a href="#list?id=${t}&amp;name=${e}" class="case__remove" data-id="${t}">删除</a>`+"</li>";n.push(e)}),u.innerHTML=n.join("")},y=function(e){var t=e.delegateTarget;const n=parseInt(t.getAttribute("data-id"),10);r=r.filter(e=>n!==e.id),m(),f.value+=`click 事件触发，事件的 delegateTarget 为：'${t}'\r`,f.value+=`删除的 li 节点 id 为：'item-${n}'\r`,l.stopImmediate(e),b()},p=function(e){e=l.getRelatedTarget(e);if(!e)return!1;f.value+=`mouseenter 事件触发，事件的 relatedTarget 为：'${e}'\r`,b()},k=function(e){var t=l.getPageX(e),n=l.getPageY(e),e=e.delegateTarget;if(!e)return!1;f.value+=`click 事件触发，当前点击的 li 节点的 id 为：'${e.id}'\r`,f.value+=`getPageX() 获取点击处的 pageX 为：'${t}'\r`,f.value+=`getPageY() 获取点点击处的 pageY 为：'${n}'\r`,b()},$=()=>{(e=!e)?(f.value+="已恢复 .case__remove 事件代理绑定\r",n.innerHTML="解除 .case__remove 绑定",l.click(".case__remove",y)):(f.value+="已解除 .case__remove 事件代理绑定\r",n.innerHTML="恢复 .case__remove 绑定",l.off("click",y)),b()},_=()=>{(t=!t)?(f.value+="已恢复 .case__item 事件代理绑定\r",i.innerHTML="解除 .case__item 绑定",l.mouseenter(".case__item",p),l.on(".case__item","click",k)):(f.value+="已解除 .case__item 事件代理绑定\r",i.innerHTML="恢复 .case__item 绑定",l.purge("mouseenter"),l.off("click",k)),b()},b=()=>{f.scrollTop=f.scrollHeight};m(),u.addEventListener("click",k),i.addEventListener("click",_),n.addEventListener("click",$),l.mouseenter(".case__item",p),l.click(".case__remove",y),l.on(".case__item","click",k),l.on(".case__item","log",s),l.on(".case__item","alert",h),l.on(".case__item","alert",d),o.addEventListener("click",c),a=l.getTypes(),f.value+=`getTypes() 获取 $emitter 绑定事件：'${a}'\r`,l.trigger("log",".case__item:nth-child(2)"),l.trigger("alert",".case__item:last-child"),g.focusin(".case__textarea",d),g.keyup(".case__textarea",v),a=g.getTypes(),f.value+=`getTypes() 获取 $provider 绑定事件：'${a}'\r`}(),function(){let u=null,l=!1,t=null;const e=document.querySelector("#aside"),a=document.querySelector("#main"),n=document.querySelector("#arrow-up"),r=document.querySelector("#arrow-down"),i=0,o=a.scrollHeight;function c(e){var t=e.delegateTarget.href.split("#")[1],t=document.querySelector("#"+t);h(t.offsetTop,50),e.stopPropagation(),e.preventDefault()}function s(){h(i)}function d(){h(o)}const v=e=>{e<=i?n.classList.add("hide"):e>=o?r.classList.add("hide"):e>i&&e<o&&(n.classList.remove("hide"),r.classList.remove("hide"))},h=(e,t=100)=>{let n=a.scrollTop;const r=e-n,i=Math.ceil(r/15),o=()=>{if(u&&clearTimeout(u),((n+=i)<=e&&r<0||n>=e&&0<r)&&(n=e,l=!1),a.scrollTop=n,v(n),!l)return clearTimeout(u),u=null,!1;u=setTimeout(o,t)};if(l)return clearTimeout(u),u=null,l=!1;l=!0,o()};var f=delegate(e),g=a.scrollTop;v(g);{const m=new IntersectionObserver(e=>{e.forEach(e=>{0<e.intersectionRatio&&(e=e.target.getAttribute("id"),e=document.querySelector(`.aside__anchor[href="#${e}"]`).parentNode,t&&t.classList.remove("active"),e.classList.add("active"),t=e)})},{root:a});a.querySelectorAll(".section__h3").forEach(e=>{m.observe(e)})}f.click(".aside__anchor",c),n.addEventListener("click",s),r.addEventListener("click",d)}();