!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).delegate=t()}(this,function(){"use strict";function o(e,t,r=!1){const i=c(e)?document.querySelector(e):e,n=i.childNodes;m(i,t).forEach(e=>{p(i,e.type,e.fn)}),(r||!0===t||1===arguments.length)&&i&&n&&n.forEach(e=>{h(e)&&o(e,t,r)})}function i(e){return e&&3===e.nodeType?e.parentNode:e}function d(e){return e=e.target,i(e)}function r(){var e=document.documentElement||document.body;let t=[0,0];return t=e&&(e.scrollTop||e.scrollLeft)?[e.scrollTop,e.scrollLeft]:t}function t(e){let t=e.pageX;return t||0===t||(t=e.clientX||0,_()&&(t+=r()[1])),t}function n(e){let t=e.pageY;return t||0===t||(t=e.clientY||0,_()&&(t+=r()[0])),t}function s(e){e.preventDefault()}function a(e){e.stopPropagation()}function l(e){a(e),s(e)}const u=(e,t=null,r=!0,i=!0)=>new CustomEvent(e,{detail:t,bubbles:r,cancelable:i}),c=e=>"string"==typeof e,h=e=>!!(e&&e.nodeName&&e.tagName&&1===e.nodeType),m=(e,t)=>{let r=e._listeners||[];return r=c(t)&&t?r.filter(e=>e.type===t):r},g=["focusout","blur","focusin","focus","load","unload","mouseenter","mouseleave"],p=(e,t,r)=>{var i=-1<g.indexOf(t);r._delegateListener&&delete(r=r._delegateListener)._delegateListener;{var n=t,o=r,s=e._listeners;let i=-1;s.length<1||(s.forEach((e,t)=>{var r=e.fn;n===e.type&&(i=t,r===o)&&(i=t)}),-1<i&&s.splice(i,1))}e.removeEventListener(t,r,i)},v=(e,t,r)=>{if("function"!=typeof(i=r)&&"[object Function]"!==Object.prototype.toString.apply(i))return o(e,t);var i;p(e,t,r)},f=(e,t="")=>{var r=t.replace(/^>/i,"");return!!(t&&r&&e)&&(e.matches?e.matches(r):!!e.msMatchesSelector&&e.msMatchesSelector(r))},$=(n,i,o,s,a,l,u=!1)=>{function c(e){var t=((e,t)=>{var r,i=n||document;if(!e)return null;do{if(null!=t&&(">"!==t[0]||e.parentNode===i)&&f(e,t))return e}while(e!==i&&(e=(r=e).host&&r!==document&&r.host.nodeType?r.host:r.parentNode))})(d(e),i);let r=l||n;e.delegateTarget=t,!0===l&&(r=a),t&&(!0===u&&v(n,o,c),s.call(r,e,a))}const e=-1<g.indexOf(o);n._listeners||(n._listeners=[]),n._listeners.push({el:n,selector:i,type:o,fn:c,data:a,context:l,capture:e}),s._delegateListener=c,n.addEventListener(o,c,e)},_=()=>{var e=navigator.userAgent;return!!e.match(/Trident/g)||!!e.match(/MSIE/g)},y=e=>{const t=m(e),r=[];return t.forEach(e=>{r.push(e.type)}),[...new Set(r)]};class T{constructor(e){return h(e)?this.$el=e:c(e)&&(this.$el=document.querySelector(e)),this}getListeners(e){return m(this.$el,e)}getTypes(){return y(this.$el)}hasEvent(t){{var r=this.$el;r=y(r);let e;return!(r.length<1)&&(e=0<r.length,e=t&&c(t)?-1<r.indexOf(t):e)}}getPageX(e){return t(e)}getPageY(e){return n(e)}getPageXY(e){return e=e,[t(e),n(e)]}getCharCode(t){{let e=t.keyCode||t.charCode;var r,t={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};return r=navigator.userAgent,e=!/Chrome|Android|CriOS|FxiOS|EdgiOS/i.test(r)&&/Mac|iPhone|iPod|iPad/i.test(r)&&/Safari/i.test(r)&&e in t?t[e]:e}}getRelatedTarget(t){{let e=t.relatedTarget;var r=t.type;return e||("mouseout"===r?e=t.toElement:"mouseover"===r&&(e=t.fromElement)),i(e)}}getTarget(e){return d(e)}purge(e,t=!1){return o(this.$el,e,t),this}destroy(){var t=this.$el;return y(t).forEach(e=>{o(t,e,!0)}),this}createEvent(e,t=null,r=!0,i=!0){return u(e,t,r,i)}off(e,t){return v(this.$el,e,t),this}on(e,t,r,i,n,o=!1){return $(this.$el,e,t,r,i,n||this,o),this}once(e,t,r,i,n){return o=this.$el,e=e,t=t,r=r,i=i,n=n,$(o,e,t,r,i,n,!0),this;var o}click(e,t,r,i,n=!1){return $(this.$el,e,"click",t,r,i,n),this}dbclick(e,t,r,i,n=!1){return $(this.$el,e,"dbclick",t,r,i,n),this}mouseenter(e,t,r,i,n=!1){return $(this.$el,e,"mouseenter",t,r,i,n),this}mouseleave(e,t,r,i,n=!1){return $(this.$el,e,"mouseleave",t,r,i,n),this}mousedown(e,t,r,i,n=!1){return $(this.$el,e,"mousedown",t,r,i,n),this}mouseup(e,t,r,i,n=!1){return $(this.$el,e,"mouseup",t,r,i,n),this}mouseover(e,t,r,i,n=!1){return $(this.$el,e,"mouseover",t,r,i,n),this}mousemove(e,t,r,i,n=!1){return $(this.$el,e,"mousemove",t,r,i,n),this}mouseout(e,t,r,i,n=!1){return $(this.$el,e,"mouseout",t,r,i,n),this}drag(e,t,r,i,n=!1){return $(this.$el,e,"drag",t,r,i,n),this}dragend(e,t,r,i,n=!1){return $(this.$el,e,"dragend",t,r,i,n),this}dragenter(e,t,r,i,n=!1){return $(this.$el,e,"dragenter",t,r,i,n),this}dragleave(e,t,r,i,n=!1){return $(this.$el,e,"dragleave",t,r,i,n),this}dragover(e,t,r,i,n=!1){return $(this.$el,e,"dragover",t,r,i,n),this}dragstart(e,t,r,i,n=!1){return $(this.$el,e,"dragstart",t,r,i,n),this}drop(e,t,r,i,n=!1){return $(this.$el,e,"drop",t,r,i,n),this}wheel(e,t,r,i,n=!1){return $(this.$el,e,"wheel",t,r,i,n),this}contextmenu(e,t,r,i,n=!1){return $(this.$el,e,"contextmenu",t,r,i,n),this}focusin(e,t,r,i,n=!1){return[e,t,r,i,n,o=!1]=[this.$el,e,t,r,i,n],s=_()?"focusin":"focus",$(e,t,s,r,i,n,o),this;var o,s}focusout(e,t,r,i,n=!1){return[e,t,r,i,n,o=!1]=[this.$el,e,t,r,i,n],s=_()?"focusout":"blur",$(e,t,s,r,i,n,o),this;var o,s}change(e,t,r,i,n=!1){return $(this.$el,e,"change",t,r,i,n),this}input(e,t,r,i,n=!1){return $(this.$el,e,"input",t,r,i,n),this}compositionstart(e,t,r,i,n=!1){return $(this.$el,e,"compositionstart",t,r,i,n),this}compositionupdate(e,t,r,i,n=!1){return $(this.$el,e,"compositionupdate",t,r,i,n),this}compositionend(e,t,r,i,n=!1){return $(this.$el,e,"compositionend",t,r,i,n),this}paste(e,t,r,i,n=!1){return $(this.$el,e,"paste",t,r,i,n),this}copy(e,t,r,i,n=!1){return $(this.$el,e,"copy",t,r,i,n),this}cut(e,t,r,i,n=!1){return $(this.$el,e,"cut",t,r,i,n),this}keydown(e,t,r,i,n=!1){return $(this.$el,e,"keydown",t,r,i,n),this}keyup(e,t,r,i,n=!1){return $(this.$el,e,"keyup",t,r,i,n),this}error(e,t,r,i,n=!1){return $(this.$el,e,"error",t,r,i,n),this}trigger(e,t){return r=this.$el,(e=e)&&t&&(r=r.querySelector(t))&&r.dispatchEvent(u(e)),this;var r}preventDefault(e){return s(e),this}stopPropagation(e){return a(e),this}stopEvent(e){return l(e),this}stopImmediate(e){return e=e,l(e),e.stopImmediatePropagation(),this}}return e=>new T(e)}),function(){let i=[{id:1,text:"Item-1"},{id:2,text:"Item-2"},{id:3,text:"Item-3"},{id:4,text:"Item-4"},{id:5,text:"Item-5"},{id:6,text:"Item-6"},{id:7,text:"Item-7"},{id:8,text:"Item-8"},{id:9,text:"Item-9"},{id:10,text:"Item-10"}],e=!0,t=!0;const r=document.querySelector("#action-remove"),n=document.querySelector("#action-item"),o=document.querySelector("#append"),s=document.querySelector("#list"),a=delegate(s);var l=document.querySelector("#console");function u(){var e=i.length,t={id:e=0<e?i[e-1].id+1:1,text:"Item-"+e};i.push(t),v(),g.value+=`新添加的 li 节点的 id 为：'item-${e}'\r`,E()}function c(e){var t=e.delegateTarget,e=e.type;if(!t)return!1;g.value+=`$emitter.trigger('log', '.case__item:nth-child(2)') 触发自定义 ${e} 事件\r`,g.value+=`事件的 delegateTarget 为节点的 id 为：'${t.id}'\r`,E()}function d(e){var t=e.type;if(!(e=e.target))return!1;g.value+=e+` 触发 ${t} 事件\r`,E()}function h(e){var t=e.type,r=e.target,e=p.getCharCode(e);if(!r)return!1;g.value+=`\r${r} 触发 ${t} 事件\r`,g.value+=`事件的 charCode 是：${e}\r`,E()}function m(e){var t=e.type,r=e.target;if(!r)return!1;a.stopImmediate(e),g.value+=`$emitter.trigger('alert', '.case__item:last-child') 触发自定义 ${t} 事件\r`,g.value+=`事件的 delegateTarget 为节点的 id 为：'${r.id}'\r`,E()}const g=document.querySelector("#log"),p=delegate(l),v=()=>{let r=[];i.forEach(e=>{var t=e.id,e=encodeURIComponent(e.text),e=`<li id="${"item-"+t}" class="case__item">`+`<span class="case__label">${e}</span>`+`<a href="#list?id=${t}&amp;name=${e}" class="case__remove" data-id="${t}">删除</a>`+"</li>";r.push(e)}),s.innerHTML=r.join("")},f=function(e){var t=e.delegateTarget;const r=parseInt(t.getAttribute("data-id"),10);i=i.filter(e=>r!==e.id),v(),g.value+=`click 事件触发，事件的 delegateTarget 为：'${t}'\r`,g.value+=`删除的 li 节点 id 为：'item-${r}'\r`,a.stopImmediate(e),E()},$=function(e){e=a.getRelatedTarget(e);if(!e)return!1;g.value+=`mouseenter 事件触发，事件的 relatedTarget 为：'${e}'\r`,E()},_=function(e){var t=a.getPageX(e),r=a.getPageY(e),e=e.delegateTarget;if(!e)return!1;g.value+=`click 事件触发，当前点击的 li 节点的 id 为：'${e.id}'\r`,g.value+=`getPageX() 获取点击处的 pageX 为：'${t}'\r`,g.value+=`getPageY() 获取点点击处的 pageY 为：'${r}'\r`,E()},y=()=>{(e=!e)?(g.value+="已恢复 .case__remove 事件代理绑定\r",r.innerHTML="解除 .case__remove 绑定",a.click(".case__remove",f)):(g.value+="已解除 .case__remove 事件代理绑定\r",r.innerHTML="恢复 .case__remove 绑定",a.off("click",f)),E()},T=()=>{(t=!t)?(g.value+="已恢复 .case__item 事件代理绑定\r",n.innerHTML="解除 .case__item 绑定",a.mouseenter(".case__item",$),a.on(".case__item","click",_)):(g.value+="已解除 .case__item 事件代理绑定\r",n.innerHTML="恢复 .case__item 绑定",a.purge("mouseenter"),a.off("click",_)),E()},E=()=>{g.scrollTop=g.scrollHeight};v(),s.addEventListener("click",_),n.addEventListener("click",T),r.addEventListener("click",y),a.mouseenter(".case__item",$),a.click(".case__remove",f),a.on(".case__item","click",_),a.on(".case__item","log",c),a.on(".case__item","alert",m),a.on(".case__item","alert",d),o.addEventListener("click",u),l=a.getTypes(),g.value+=`getTypes() 获取 $emitter 绑定事件：'${l}'\r`,a.trigger("log",".case__item:nth-child(2)"),a.trigger("alert",".case__item:last-child"),p.focusin(".case__textarea",d),p.keyup(".case__textarea",h),l=p.getTypes(),g.value+=`getTypes() 获取 $provider 绑定事件：'${l}'\r`}(),function(){let s=null,a=!1,t=null;function e(e){var t=e.delegateTarget.href.split("#")[1],t=document.querySelector("#"+t);m(t.offsetTop,50),e.stopPropagation(),e.preventDefault()}function r(){m(c)}function i(){m(d)}const n=document.querySelector("#aside"),l=document.querySelector("#main"),o=document.querySelector("#arrow-up"),u=document.querySelector("#arrow-down"),c=0,d=l.scrollHeight,h=e=>{e<=c?o.classList.add("hide"):e>=d?u.classList.add("hide"):e>c&&e<d&&(o.classList.remove("hide"),u.classList.remove("hide"))},m=(e,t=100)=>{let r=l.scrollTop;const i=e-r,n=Math.ceil(i/15),o=()=>{if(s&&clearTimeout(s),((r+=n)<=e&&i<0||r>=e&&0<i)&&(r=e,a=!1),l.scrollTop=r,h(r),!a)return clearTimeout(s),s=null,!1;s=setTimeout(o,t)};if(a)return clearTimeout(s),s=null,a=!1;a=!0,o()};var g=delegate(n);h(l.scrollTop);{const p=new IntersectionObserver(e=>{e.forEach(e=>{0<e.intersectionRatio&&(e=e.target.getAttribute("id"),e=document.querySelector(`.aside__anchor[href="#${e}"]`).parentNode,t&&t.classList.remove("active"),e.classList.add("active"),t=e)})},{root:l});l.querySelectorAll(".section__h3").forEach(e=>{p.observe(e)})}g.click(".aside__anchor",e),o.addEventListener("click",r),u.addEventListener("click",i)}();