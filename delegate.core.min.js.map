{"version":3,"file":"delegate.core.min.js","sources":["utils/isString.js","utils/isElement.js","getListeners.js","enum.js","_off.js","_delete.js","purgeElement.js","utils/isFunction.js","utils/_typeof.js","off.js","at.js","matches.js","getParentOrHost.js","on.js","getTarget.js","resolveTextNode.js","closest.js","destroy.js","getTypes.js","createEvent.js","emitter.core.js","only.js","once.js","trigger.js","delegate.core.js"],"sourcesContent":["/**\n * 判断是否为 String 类型值\n * ========================================================================\n * @method isString\n * @param {*} val - （必须）待检测的字符串\n * @returns {Boolean}\n */\nconst isString = (val) => {\n  return typeof val === 'string'\n}\n\nexport default isString\n","/**\n * 检测是否为 HTMLElement 元素节点\n * ========================================================================\n * @method isElement\n * @param {*|HTMLElement} el - （必须）待检测的数据（DOM 元素）\n * @returns {Boolean}\n */\nconst isElement = (el) => {\n  return !!(el && el.nodeName && el.tagName && el.nodeType === 1)\n}\n\nexport default isElement\n","import isString from './utils/isString'\n\n/**\n * 获取 DOM 元素（type 事件类型）事件绑定信息\n * ========================================================================\n * 如果设置了事件类型 type， 则返回指定类型的事件绑定信息，否则返回所有事件绑定信息\n * ========================================================================\n * @methods getListeners\n * @param {HTMLElement} el - （必须）要获取事件绑定信息的 DOM 元素\n * @param {String} [type] - （可选）事件类型\n * @returns {Array} - 已绑定的事件信息\n */\nconst getListeners = (el, type) => {\n  let listeners = el._listeners || []\n\n  if (isString(type) && type) {\n    listeners = listeners.filter((listener) => {\n      return listener.type === type\n    })\n  }\n\n  return listeners\n}\n\nexport default getListeners\n","export const CAPTURE_EVENTS = [\n  'focusout',\n  'blur',\n  'focusin',\n  'focus',\n  'load',\n  'unload',\n  'mouseenter',\n  'mouseleave'\n]\n","import { CAPTURE_EVENTS } from './enum'\nimport _delete from './_delete'\n\n/**\n * （私有方法）取消 type 类型的代理事件绑定\n * ========================================================================\n * 如果没有设置 handler，则销毁 this.$options 绑定的所有符合 type 事件类型的事件绑定\n * ========================================================================\n * @method _off\n * @param {HTMLElement} el - （必须）取消事件绑定的 DOM 元素\n * @param {String} type - （必须）事件类型\n * @param {Function} fn - （必须）事件处理器回调函数\n * @private\n */\nconst _off = (el, type, fn) => {\n  const capture = CAPTURE_EVENTS.indexOf(type) > -1\n\n  /* istanbul ignore else */\n  if (fn._delegateListener) {\n    fn = fn._delegateListener\n    delete fn._delegateListener\n  }\n\n  // 移除缓存的 _listeners 数据\n  _delete(el, type, fn)\n\n  el.removeEventListener(type, fn, capture)\n}\n\nexport default _off\n","/**\n * 删除 DOM 元素缓存的 _listeners 数据\n * ========================================================================\n * @method _delete\n * @param {HTMLElement} el - 要删除 listener 的 DOM 元素\n * @param {String} type - 事件类型（名称）\n * @param {Function} [fn] - 事件处理器回调函数\n */\nconst _delete = function (el, type, fn) {\n  const listeners = el._listeners\n  let index = -1\n\n  if (listeners.length < 1) {\n    return false\n  }\n\n  // 移除缓存的 _listeners 数据\n  listeners.forEach((listener, i) => {\n    const handler = listener.fn\n\n    if (type === listener.type) {\n      index = i\n\n      if (handler === fn) {\n        index = i\n      }\n    }\n  })\n\n  /* istanbul ignore else */\n  if (index > -1) {\n    listeners.splice(index, 1)\n  }\n}\n\nexport default _delete\n","import isString from './utils/isString'\nimport isElement from './utils/isElement'\nimport getListeners from './getListeners'\nimport _off from './_off'\n\n/**\n * 销毁（type 类型的）代理事件绑定\n * ========================================================================\n * 1. 设置了事件类型 type，则销毁指定类型的事件绑定，否则清除所有代理事件绑定\n * 2. recurse 设置为 true，递归销毁子节点全部事件绑定\n * ========================================================================\n * @method purgeElement\n * @param {HTMLElement|String} el - （必须）DOM 元素或者其选择器\n * @param {String|Boolean} type - （必须）事件类型\n * @param {Boolean} [recurse] - （可选）是否递归销毁子节点所有事件绑定\n */\nconst purgeElement = function (el, type, recurse = false) {\n  const $element = isString(el) ? document.querySelector(el) : el\n  const $children = $element.childNodes\n  const listeners = getListeners($element, type)\n\n  listeners.forEach((listener) => {\n    _off($element, listener.type, listener.fn)\n  })\n\n  if (\n    (recurse || type === true || arguments.length === 1) &&\n    $element &&\n    $children\n  ) {\n    $children.forEach(($child) => {\n      if (isElement($child)) {\n        purgeElement($child, type, recurse)\n      }\n    })\n  }\n}\n\nexport default purgeElement\n","import _typeof from './_typeof'\n\n/**\n * 检测测试数据是否为 Function 类型\n * ========================================================================\n * @method isFunction\n * @param {*} val - （必须）待检测的数据\n * @returns {boolean} 'val' 是 Function 类型返回 true，否则返回 false\n */\nconst isFunction = (val) => {\n  return typeof val === 'function' || _typeof(val) === '[object Function]'\n}\n\nexport default isFunction\n","/**\n * 返回检测数据调用 toString() 方法后的字符串，用以判断数据类型。\n * ========================================================================\n * @method _typeof\n * @param {*} val - （必须）待检测的数据\n * @returns {String}\n *\n * @example\n * _typeof({})\n * // => '[object Object]'\n *\n * _typeof(function(){})\n * // => '[object Function]'\n *\n * _typeof([])\n * // => '[object Array]'\n *\n * _typeof('')\n * // => '[object String]'\n *\n * _typeof(2)\n * // => '[object Number]'\n */\nconst _typeof = (val) => {\n  return Object.prototype.toString.apply(val)\n}\n\nexport default _typeof\n","import purgeElement from './purgeElement'\nimport isFunction from './utils/isFunction'\nimport _off from './_off'\n\n/**\n * 取消 type 类型的代理事件绑定\n * ========================================================================\n * 如果没有设置 handler，则销毁 this.$options 绑定的所有符合 type 事件类型的事件绑定\n * ========================================================================\n * @method off\n * @param {HTMLElement} el - （必须）取消事件绑定的 DOM 元素\n * @param {String} type - （必须）事件类型\n * @param {Function} [fn] - （可选）事件处理器回调函数\n */\nconst off = (el, type, fn) => {\n  // 如果不设置 fn 参数，默认清除 el 元素上绑定的所有事件处理器\n  if (!isFunction(fn)) {\n    return purgeElement(el, type)\n  }\n\n  _off(el, type, fn)\n}\n\nexport default off\n","import isFunction from './utils/isFunction'\nimport off from './off'\n\nimport { CAPTURE_EVENTS } from './enum'\n\n/**\n * 绑定事件\n * ========================================================================\n * @method at\n * @param {HTMLElement|String|Object} el - （必须）绑定代理事件的 DOM 节点\n * @param {String|Function} type - （必须）事件类型或者事件处理器回调函数\n * @param {Function|Object} fn - （必须） 事件处理器回调函数或者传递给事件处理器回调函数的数据对象\n * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象或者事件处理器回调函数的 this 上下文指向，\n * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向，或者是否仅触发一次\n * 当设置为 true 时，则事件处理器回调函数的 this 上下文指向为 data 对象\n * @param {Boolean} once - （可选）是否仅触发一次\n */\nconst at = (el, type, fn, data, context, once = false) => {\n  // CAPTURE_EVENTS 中的特殊事件，采用事件捕获模型\n  const capture = CAPTURE_EVENTS.indexOf(type) > -1\n  const listener = function (evt) {\n    let overrideContext = context || el\n\n    // 当设置为 true 时，则事件处理器回调函数的\n    // this 上下文指向为 data 对象\n    if (context === true) {\n      overrideContext = data\n    }\n\n    // 仅触发一次\n    /* istanbul ignore else */\n    if (once === true) {\n      off(el, type, listener)\n    }\n\n    fn.call(overrideContext, evt, data)\n  }\n\n  if (!isFunction(fn)) {\n    return false\n  }\n\n  if (!el._listeners) {\n    el._listeners = []\n  }\n\n  // 缓存 options 元素绑定的事件处理器\n  el._listeners.push({\n    el,\n    type,\n    fn: listener,\n    data,\n    context,\n    capture\n  })\n\n  // 缓存包装后的事件处理器\n  fn._delegateListener = listener\n\n  el.addEventListener(type, listener, capture)\n}\n\nexport default at\n","/**\n * 获取 options 节点下匹配 selector 选择器的 DOM 节点\n * ========================================================================\n * Element.matches() 方法可以用来判断 DOM 元素是否与给定的选择器匹配，事件代理判断是\n * 否触发绑定的代理事件回调函数，关键就是使用 Element.matches() 辨别当前事件触发的目\n * 标 DOM 元素是否为事件代理所期望触发的目标。\n * ========================================================================\n * @method matches\n * @see https://developer.mozilla.org/en-US/docs/web/api/element/matches\n * @param {HTMLElement} el - （必须）DOM 元素\n * @param {String} selector - （必须）匹配 DOM 元素的选择器\n * @returns {Boolean}\n */\nconst matches = (el, selector = '') => {\n  const sel = selector.replace(/^>/i, '')\n\n  if (!selector || !sel || !el) {\n    return false\n  }\n\n  /* istanbul ignore else */\n  if (el.matches) {\n    return el.matches(sel)\n  } else if (el.msMatchesSelector) {\n    return el.msMatchesSelector(sel)\n  } else {\n    return false\n  }\n}\n\nexport default matches\n","/**\n * 获取 DOM 元素的父节点\n * ========================================================================\n * @method getParentOrHost\n * @param {*|HTMLElement} el - （必须）要获取父节点的 DOM 元素\n * @returns {*|HTMLElement}\n */\nconst getParentOrHost = (el) => {\n  return el.host && el !== document && el.host.nodeType\n    ? el.host\n    : el.parentNode\n}\n\nexport default getParentOrHost\n","import closest from './closest'\nimport off from './off'\nimport getTarget from './getTarget'\nimport { CAPTURE_EVENTS } from './enum'\n\n/**\n * 绑定代理事件\n * ========================================================================\n * @method on\n * @param {HTMLElement|String} el - （必须）绑定代理事件的 DOM 节点\n * @param {String} selector - （必须）事件代理目标 DOM 元素的选择器\n * @param {String} type - （必须）事件类型\n * @param {Function} fn - （必须） 事件处理器回调函数\n * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象\n * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向，\n * 当设置为 true 时，则事件处理器回调函数的 this 上下文指向为 data 对象\n * @param {Boolean} once - （可选）是否仅触发一次\n */\nconst on = (el, selector, type, fn, data, context, once = false) => {\n  // CAPTURE_EVENTS 中的特殊事件，采用事件捕获模型\n  const capture = CAPTURE_EVENTS.indexOf(type) > -1\n\n  const listener = function (evt) {\n    const target = getTarget(evt)\n    // 通过 Element.matches 方法获得点击的目标元素\n    const delegateTarget = closest(target, selector, el)\n    let overrideContext = context || el\n\n    evt.delegateTarget = delegateTarget\n\n    // 当设置为 true 时，则事件处理器回调函数的\n    // this 上下文指向为 data 对象\n    if (context === true) {\n      overrideContext = data\n    }\n\n    /* istanbul ignore else */\n    if (delegateTarget) {\n      // 仅触发一次\n      /* istanbul ignore else */\n      if (once === true) {\n        off(el, type, listener)\n      }\n\n      fn.call(overrideContext, evt, data)\n    }\n  }\n\n  if (!el._listeners) {\n    el._listeners = []\n  }\n\n  // 缓存 options 元素绑定的事件处理器\n  el._listeners.push({\n    el,\n    selector,\n    type,\n    fn: listener,\n    data,\n    context,\n    capture\n  })\n\n  // 缓存包装后的事件处理器\n  fn._delegateListener = listener\n\n  el.addEventListener(type, listener, capture)\n}\n\nexport default on\n","import resolveTextNode from './resolveTextNode'\n\n/**\n * 返回触发事件的 target DOM 元素\n * ========================================================================\n * @method getTarget\n * @param {Event} evt - Event 对象\n * @return {HTMLElement} - Event 对象的 target DOM 元素\n */\nconst getTarget = function (evt) {\n  const target = evt.target\n\n  return resolveTextNode(target)\n}\n\nexport default getTarget\n","/**\n * 在某些情况下，某些浏览器（例如：Safari 浏览器）会返回实际的目标元素内部的文本节点。\n * resolveTextNode() 方法则会返回实际的目标节点。\n * ========================================================================\n * @method resolveTextNode\n * @param {HTMLElement|Text} el - 要解析的节点\n * @return {*|HTMLElement} - 实际的目标 DOM 节点\n */\nconst resolveTextNode = function (el) {\n  if (el && el.nodeType === 3) {\n    return el.parentNode\n  }\n\n  return el\n}\n\nexport default resolveTextNode\n","import matches from './matches'\nimport getParentOrHost from './getParentOrHost'\n\n/**\n * 获取 options 元素父元素最近的包含 selector 选择器的元素\n * ========================================================================\n * @method closest\n * @param {HTMLElement} el - （必须）DOM 元素\n * @param {String} selector - （必须）DOM 元素的选择其\n * @param {HTMLElement} [ctx] - （必须）比对的 DOM 元素\n * @param {Boolean} [includeCTX] - （必须）是否包含 context DOM 元素\n * @returns {null|HTMLElement} - 返回最接近的 DOM 元素\n */\nconst closest = (el, selector, ctx, includeCTX) => {\n  const context = ctx || document\n\n  if (!el) {\n    return null\n  }\n\n  do {\n    /* istanbul ignore else */\n    if (\n      (selector != null &&\n        (selector[0] === '>'\n          ? el.parentNode === context && matches(el, selector)\n          : matches(el, selector))) ||\n      (includeCTX && el === context)\n    ) {\n      return el\n    }\n\n    /* istanbul ignore else */\n    if (el === context) {\n      break\n    }\n\n    /* jshint boss:true */\n  } while ((el = getParentOrHost(el)))\n}\n\nexport default closest\n","import getTypes from './getTypes'\nimport purgeElement from './purgeElement'\n\n/**\n * 销毁所有已绑定的代理事件\n * ========================================================================\n * @method destroy\n * @param {HTMLElement} el - 需要解除所有事件绑定的 DOM 元素\n * @returns {Emitter} - Emitter 对象\n */\nconst destroy = (el) => {\n  const types = getTypes(el)\n\n  types.forEach((type) => {\n    purgeElement(el, type, true)\n  })\n}\n\nexport default destroy\n","import getListeners from './getListeners'\n\n/**\n * 返回已绑定的事件类型的数组（去除名称重复的事件）\n * ========================================================================\n * @method getTypes\n * @returns {Array}\n */\nconst getTypes = (el) => {\n  const listeners = getListeners(el)\n  const types = []\n\n  listeners.forEach((listener) => {\n    types.push(listener.type)\n  })\n\n  return [...new Set(types)]\n}\n\nexport default getTypes\n","/**\n * 创建自定义事件（CustomerEvent）\n * ========================================================================\n * @method createEvent\n * @param {String} type - （必须）事件类型（名称）\n * @param {Object} [detail] - （可选）传递给自定义事件的数据，默认为 null\n * @param {Boolean} [bubbles] - （可选）是否支持冒泡，默认为 true\n * @param {Boolean} [cancelable] - （可选）是否可以取消，默认为 true\n * @returns {CustomEvent} - CustomerEvent 实例\n *\n * @example\n * <div id=\"nav\" class=\"nav\">\n *   <a id=\"service\" class=\"anchor\" href=\"https://www.yaohaixiao.com/serivce\">Service</a>\n *   <a id=\"help\" class=\"anchor\" href=\"https://www.yaohaixiao.com/help\">Help</a>\n * </div>\n *\n * const $nav = document.querySelector('#nav')\n * const logEvent = createEvent('log', {\n *   name: 'Yao',\n *   hi() {\n *     console.log('hi！！！')\n *   }\n * })\n *\n * const logHandler = function(evt) {\n *   console.log('detail', evt.detail)\n *   console.log('type', evt.type)\n * }\n *\n * $nav.addEventListener('log', logHandler)\n *\n * $nav.dispatchEvent(logEvent)\n */\nconst createEvent = (\n  type,\n  detail = null,\n  bubbles = true,\n  cancelable = true\n) => {\n  return new CustomEvent(type, {\n    detail: detail,\n    bubbles: bubbles,\n    cancelable: cancelable\n  })\n}\n\nexport default createEvent\n","import off from './off'\nimport at from './at'\nimport on from './on'\nimport only from './only'\nimport once from './once'\nimport isElement from './utils/isElement'\nimport isString from './utils/isString'\nimport purgeElement from './purgeElement'\nimport destroy from './destroy'\nimport trigger from './trigger'\nimport createEvent from './createEvent'\n\n/**\n * Emitter 类 - JavaScript 事件代理对象\n * ========================================================================\n */\nclass Emitter {\n  /**\n   * Emitter 构造函数\n   * ========================================================================\n   * @constructor\n   * @param {HTMLElement|String} el - （必须）DOM 元素或其选择器\n   * @returns {Emitter} - Emitter 对象\n   */\n  constructor(el) {\n    if (isElement(el)) {\n      this.$el = el\n    } else {\n      if (isString(el)) {\n        this.$el = document.querySelector(el)\n      }\n    }\n  }\n\n  /**\n   * 销毁（type 类型的）代理事件绑定\n   * ========================================================================\n   * 1. 设置了事件类型 type，则销毁指定类型的事件绑定，否则清除所有代理事件绑定\n   * 2. recurse 设置为 true，递归销毁子节点全部事件绑定\n   * ========================================================================\n   * @method purge\n   * @param {String} type  - （必须）事件类型\n   * @param {Boolean} [recurse]  - （可选）是否递归销毁子节点所有事件绑定\n   * 元素绑定的全部事件处理器\n   * @returns {Emitter} - Emitter 对象\n   */\n  purge(type, recurse = false) {\n    purgeElement(this.$el, type, recurse)\n\n    return this\n  }\n\n  /**\n   * 销毁所有已绑定的代理事件\n   * ========================================================================\n   * @method destroy\n   * @returns {Emitter} - Emitter 对象\n   */\n  destroy() {\n    destroy(this.$el)\n\n    return this\n  }\n\n  /**\n   * 取消 type 类型的代理事件绑定\n   * ========================================================================\n   * 如果没有设置 handler，则销毁 this.$options 绑定的所有符合 type 事件类型的事件绑定\n   * ========================================================================\n   * @method off\n   * @param {String} type - （必须）事件类型\n   * @param {Function} [handler] - （可选）事件处理器回调函数\n   * @returns {Emitter} - Emitter 对象\n   */\n  off(type, handler) {\n    off(this.$el, type, handler)\n\n    return this\n  }\n\n  /**\n   * 绑定事件\n   * ========================================================================\n   * @method at\n   * @param {String|Function} type - （必须）事件类型或者事件处理器回调函数\n   * @param {Function|Object} fn - （必须） 事件处理器回调函数或者传递给事件处理器回调函数的数据对象\n   * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象或者事件处理器回调函数的 this 上下文指向，\n   * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向，或者是否仅触发一次\n   * 当设置为 true 时，则事件处理器回调函数的 this 上下文指向为 data 对象\n   * @param {Boolean} once - （可选）是否仅触发一次\n   * @returns {Emitter} - Emitter 对象\n   */\n  at(type, fn, data, context, once = false) {\n    at(this.$el, type, fn, data, context, once)\n\n    return this\n  }\n\n  /**\n   * 绑定代理事件\n   * ========================================================================\n   * @method on\n   * @param {String} selector - （必须）事件代理目标 DOM 元素的选择器\n   * @param {String} type - （必须）事件类型\n   * @param {Function} handler - （必须） 事件处理器回调函数\n   * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象\n   * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向：\n   * 当设置为 true 时，则事件处理器回调函数的 this 上下文指向为 data 对象；\n   * 如未指定 context，则事件处理器回调函数的 this 上下文指向为 Emitter 对象；\n   * @param {Boolean} [once] - （可选）是否仅触发一次\n   * @returns {Emitter} - Emitter 对象\n   */\n  on(selector, type, handler, data, context, once = false) {\n    on(this.$el, selector, type, handler, data, context || this, once)\n\n    return this\n  }\n\n  /**\n   * 绑定仅触发一次的事件\n   * ========================================================================\n   * @method only\n   * @param {String} type - （必须）事件类型\n   * @param {Function} handler - （必须） 事件处理器回调函数\n   * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象\n   * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向\n   * @returns {Emitter} - Emitter 对象\n   */\n  only(type, handler, data, context) {\n    only(this.$el, type, handler, data, context)\n\n    return this\n  }\n\n  /**\n   * 绑定仅触发一次的代理事件\n   * ========================================================================\n   * @method once\n   * @param {String} selector - （必须）事件代理目标 DOM 元素的选择器\n   * @param {String} type - （必须）事件类型\n   * @param {Function} handler - （必须） 事件处理器回调函数\n   * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象\n   * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向\n   * @returns {Emitter} - Emitter 对象\n   */\n  once(selector, type, handler, data, context) {\n    once(this.$el, selector, type, handler, data, context)\n\n    return this\n  }\n\n  /**\n   * 绑定 click 代理事件\n   * ========================================================================\n   * @method click\n   * @since 1.4.0\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/click_event\n   * @param {String} selector - （必须）事件代理目标 DOM 元素的选择器\n   * @param {Function} handler - （必须） 事件处理器回调函数\n   * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象\n   * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向\n   * @param {Boolean} [once] - （可选）是否仅触发一次\n   * @returns {Emitter} - Emitter 对象\n   */\n  click(selector, handler, data, context, once = false) {\n    on(this.$el, selector, 'click', handler, data, context, once)\n\n    return this\n  }\n\n  /**\n   * 绑定 mousemove 代理事件\n   * ========================================================================\n   * @method mousemove\n   * @since 1.7.0\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/mousemove_event\n   * @param {String} selector - （必须）事件代理目标 DOM 元素的选择器\n   * @param {Function} handler - （必须） 事件处理器回调函数\n   * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象\n   * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向\n   * @param {Boolean} [once] - （可选）是否仅触发一次\n   * @returns {Emitter} - Emitter 对象\n   */\n  mousemove(selector, handler, data, context, once = false) {\n    on(this.$el, selector, 'mousemove', handler, data, context, once)\n\n    return this\n  }\n\n  /**\n   * 绑定 mouseout 代理事件\n   * ========================================================================\n   * @method mouseout\n   * @since 1.7.0\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/mouseout_event\n   * @param {String} selector - （必须）事件代理目标 DOM 元素的选择器\n   * @param {Function} handler - （必须） 事件处理器回调函数\n   * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象\n   * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向\n   * @param {Boolean} [once] - （可选）是否仅触发一次\n   * @returns {Emitter} - Emitter 对象\n   */\n  mouseout(selector, handler, data, context, once = false) {\n    on(this.$el, selector, 'mouseout', handler, data, context, once)\n\n    return this\n  }\n\n  /**\n   * 绑定 change 代理事件\n   * ========================================================================\n   * @method change\n   * @since 1.7.0\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/change_event\n   * @param {String} selector - （必须）事件代理目标 DOM 元素的选择器\n   * @param {Function} handler - （必须） 事件处理器回调函数\n   * @param {Object} [data] - （可选）传递给事件处理器回调函数的数据对象\n   * @param {Object|Boolean} [context] - （可选）事件处理器回调函数的 this 上下文指向\n   * @param {Boolean} [once] - （可选）是否仅触发一次\n   * @returns {Emitter} - Emitter 对象\n   */\n  change(selector, handler, data, context, once = false) {\n    on(this.$el, selector, 'change', handler, data, context, once)\n\n    return this\n  }\n\n  /**\n   * 创建自定义事件（CustomerEvent）\n   * ========================================================================\n   * @method createEvent\n   * @since 1.8.0\n   * @see createEvent\n   * @param {String} type - （必须）事件类型（名称）\n   * @param {Object} [detail] - （可选）传递给自定义事件的数据，默认为 null\n   * @param {Boolean} [bubbles] - （可选）是否支持冒泡，默认为 true\n   * @param {Boolean} [cancelable] - （可选）是否可以取消，默认为 true\n   * @returns {CustomEvent} - CustomerEvent 实例\n   */\n  createEvent(type, detail = null, bubbles = true, cancelable = true) {\n    return createEvent(type, detail, bubbles, cancelable)\n  }\n\n  /**\n   * 触发代理自定义事件\n   * ========================================================================\n   * @method trigger\n   * @since 1.6.0\n   * @param {String} type - （必须）事件类型\n   * @param {String} selector - （必须）选择器\n   * @returns {Emitter} - Emitter 对象\n   */\n  trigger(type, selector) {\n    trigger(this.$el, type, selector)\n\n    return this\n  }\n}\n\nexport default Emitter\n","import at from './at'\n\n/**\n * 绑定只触发一次的事件\n * ========================================================================\n * @method once\n * @param {HTMLElement} el - （必须）绑定代理事件的 DOM 节点\n * @param {String} type - （必须）事件类型\n * @param {Function} fn - （必须） 事件处理器回调函数\n * @param {Object} data - （可选）传递给事件处理器回调函数的数据对象\n * @param {Object|Boolean} context - （可选）事件处理器回调函数的 this 上下文指向，\n * 当设置为 true 时，则事件处理器回调函数的 this 上下文指向为 data 对象\n */\nconst only = (el,  type, fn, data, context) => {\n  at(el, type, fn, data, context, true)\n}\n\nexport default only\n","import on from './on'\n\n/**\n * 绑定只触发一次的事件\n * ========================================================================\n * @method once\n * @param {HTMLElement} el - （必须）绑定代理事件的 DOM 节点\n * @param {String} selector - （必须）事件代理目标 DOM 元素的选择器\n * @param {String} type - （必须）事件类型\n * @param {Function} fn - （必须） 事件处理器回调函数\n * @param {Object} data - （可选）传递给事件处理器回调函数的数据对象\n * @param {Object|Boolean} context - （可选）事件处理器回调函数的 this 上下文指向，\n * 当设置为 true 时，则事件处理器回调函数的 this 上下文指向为 data 对象\n */\nconst once = (el, selector, type, fn, data, context) => {\n  on(el, selector, type, fn, data, context, true)\n}\n\nexport default once\n","import createEvent from './createEvent'\n\n/**\n * 触发代理自定义事件\n * ========================================================================\n * trigger() 方法也可以用来手动触发内置的事件，例如 click, mouseenter 等事件，通常\n * 使用 trigger() 来手动触发用户自定义事件。\n *\n * 另外，选择器 selector 的匹配使用 document.querySelector() 方法，因此仅事件触发一次。\n * ========================================================================\n * @method trigger\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CustomEvent\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/dispatchEvent\n * @param {HTMLElement} el - （必须）绑定代理事件的 DOM 元素\n * @param {String} type - （必须）事件类型\n * @param {String} [selector] - （可选）选择器，没有选择器，则直接触发 el 元素上的自定义事件\n *\n * @example\n * const $list = document.querySelector('#list')\n *\n * // 绑定 alert 自定义事件\n * on($list, '.item', 'alert', itemHandler)\n * on($list, '.remove', 'alert', removeHandler)\n *\n * // 触发 $list 下匹配 '.item' 元素手动触发 alert 自定义事件\n * trigger($list, 'alert', '.item')\n *\n * // 可以使用伪类选择器，更精确的匹配元素\n * trigger($list, 'alert', '.item:last-child')\n *\n * // 触发 $list 下匹配 '.remove' 元素手动触发 alert 自定义事件\n * trigger($list, 'alert', '.remove')\n * trigger($list, 'alert', '.remove:nth-child(2)')\n *\n * // 没有选择器，则直接触发 el 元素上的自定义事件\n * trigger($list, 'alert')\n */\nconst trigger = (el, type, selector) => {\n  let $element\n\n  if (!type) {\n    return false\n  }\n\n  if (selector) {\n    $element = el.querySelector(selector)\n  } else {\n    $element = el\n  }\n\n  if (!$element) {\n    return false\n  }\n\n  $element.dispatchEvent(createEvent(type))\n}\n\nexport default trigger\n","import Emitter from './emitter.core'\n\nconst delegate = (el) => {\n  return new Emitter(el)\n}\n\nexport default delegate\n"],"names":["isString","val","isElement","el","nodeName","tagName","nodeType","getListeners","type","listeners","_listeners","filter","listener","CAPTURE_EVENTS","_off","fn","capture","indexOf","_delegateListener","index","length","forEach","i","handler","splice","_delete","removeEventListener","purgeElement","recurse","$element","document","querySelector","$children","childNodes","arguments","$child","isFunction","Object","prototype","toString","apply","_typeof","off","at","data","context","once","evt","overrideContext","call","push","addEventListener","matches","selector","sel","replace","msMatchesSelector","getParentOrHost","host","parentNode","on","target","getTarget","delegateTarget","ctx","includeCTX","closest","destroy","types","Set","getTypes","createEvent","detail","bubbles","cancelable","CustomEvent","Emitter","constructor","this","$el","purge","only","click","mousemove","mouseout","change","trigger","dispatchEvent"],"mappings":"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"}